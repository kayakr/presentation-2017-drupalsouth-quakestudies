<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Migrating QuakeStudies to Islandora, DrupalSouth 2017</title>

        <meta name="author" content="Catalyst">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/catalyst.css" id="theme">

        <!-- For syntax highlighting -->
        <!-- <link rel="stylesheet" href="lib/css/zenburn.css"> -->
        <link rel="stylesheet" href="lib/css/catalyst-syntax.css">

        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
        </script>

        <style>
            /* Add the ability to omit slides from the printed version (has to be after the print include)*/
            @media print {
                .reveal .slides section.no-print {
                    display: none !important;
                    visibility: hidden !important;
                }
            }
        </style>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->

        <!-- Please put any custom styles here -->
        <style>
        /* photo caption */
        .reveal .caption {
            position: absolute;
            bottom: -250%;
            right: -2%;
            color: white;
            font-size: 0.5em;
        }
        .reveal .caption a {
            background: #FFF;
            color: #666;
            padding: 10px;
            border: 1px dashed #999;
        }

        .reveal sub {
          color: #777;
          font-size: 0.6em;
        }
        </style>
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <!-- Cover slide -->
                <!--<section data-background="img/speaker_title_slide_800.png">
                </section>-->
                <section>
                    <h3>Case Study: Migrating QuakeStudies to Islandora</h3>
                    <h1 class="catalyst-logo">Catalyst</h1>
                    <p class="small-text">
                        Presented by Jonathan Hunt <a href="https://twitter.com/kayakr">@kayakr</a>
                    </p>
                </section>

                <!-- Slide with list items (list items are displayed at once) -->
                <section>
                  <h3>Migrating QuakeStudies to Islandora</h3>
                  <ul>
                    <li>What is QuakeStudies, Islandora?</li>
                    <li>Migration process: discovery, migration, challenges</li>
                    <li>Future of QuakeStudies</li>
                    <li>Future of Islandora</li>
                  </ul>
                </section>


                <!-- What is QuakeStudies? -->
                <!--<section>-->
                  <!-- Slide with full background image -->
                  <section data-background="img/kenton_chambers_feb_2011.jpg">
                      <h3 style="color: white">What is QuakeStudies?</h3>
                      <small class="caption">Photo: J Hunt, CC-BY</small>
                  </section>

                  <section data-background="img/IMG_1486.jpg">
                    <h3>Canterbury Earthquakes</h3>
                    <ul style="position:relative">
                      <li>4 Sep 2010, 22 Feb 2011, etc.</li>
                    </ul>
                    <small class="caption">Photo: J Hunt, CC-BY</small>
                  </section>

                  <!-- Slide with list items (list items are displayed at once) -->
                  <section>
                    <h3>UC QuakeStudies</h3>
                    <ul>
                      <li>Largest content node in CEISMIC</li>
                      <li>153,442 objects in 1,842 collections</li>
                      <li>Photos, newspapers, blog posts, articles, books, video, audio, transcripts, 3D panoramas</li>
                      <li>PDF, MP4, MP3, text, zip</li>
                    </ul>
                    <aside class="notes">
                        CEISMIC=UC CEISMIC Canterbury Earthquakes Digital Archive (CEISMIC)
                        ceismic.org.nz
                    </aside>
                  </section>

                  <section data-background="img/quakestudies_home.png">
                    <!--<h3>QS home</h3>-->
                  </section>
                <!--</section>-->

                <!-- What is Islandora? -->
                <!--<section>-->
                  <!-- Slide with full background image -->
                  <!--<section data-background="img/kenton_chambers_feb_2011.jpg">
                      <h3 style="color: white">What is Islandora?</h3>
                  </section>-->

                  <!-- Slide with list items (list items are displayed at once) -->
                  <section>
                    <h3>What is Islandora?</h3>
                    <ul>
                      <li>Started 2006 by University of Prince Edward Island's Robertson Library</li>
                      <li>Drupal front-end for FEDORA (1997), indexed into Solr, Mulgara</li>
                      <li>Institutional Repository (IR), Digital Collection management (DCM), Research Data Management (RDM)</li>
                    </ul>
                    <aside class="notes">
                      Fedora=Flexible Extensible Digital Object Repository Architecture.
                      http://fedorarepository.org/about
                    </aside>
                  </section>

                  <section>
                    <h3>Examples of Islandora</h3>
                    <ul>
                      <li><a href="http://islandscholar.ca/islandora/search/Search%20IslandScholar%3A?type=dismax">UPEI Island Scholar</a> (IR)</li>
                      <li><a href="https://researchdata.sfu.ca/islandora/object/islandora%3Aroot">SFU Research Data Repository</a> (RDM)</li>
                      <li><a href="http://thisvancouver.vpl.ca/story-city">Vancouver Public Library Story City</a> (DCM)</li>
                      <li><a href="https://maybragdon.lib.rochester.edu/">Uni of Rochester May Bragdon diaries</a> (DCM)</li>
                      <li>QuakeStudies archive at UC (DCM)</li>
                    </ul>
                  </section>

                  <section data-background="img/islandscholar.ca_islandora_search_mdpi.png">
                    <!--<h3>UPEI</h3>-->
                  </section>

                  <section data-background="img/researchdata.sfu.ca_islandora_object_islandora_mdpi.png">
                    <!--<h3>researchdata.sfu.ca</h3>-->
                  </section>

                  <section data-background="img/thisvancouver.vpl.ca_story-city_mdpi.png">
                    <!--<h3>thisvancouver.vpl.ca</h3>-->
                  </section>
                  <section data-background="img/thisvancouver.vpl.ca_story-city_mdpi_story.png">
                    <!--<h3>thisvancouver.vpl.ca</h3>-->
                  </section>

                  <section data-background="img/maybragdon.lib.rochester.edu_mdpi.png">
                    <!--<h3>https://maybragdon.lib.rochester.edu/</h3>-->
                  </section>
                  <section data-background="img/maybragdon.lib.rochester.edu_islandora_object_maybragdon-524_mdpi.png">
                    <!--<h3>https://maybragdon.lib.rochester.edu/</h3>-->
                  </section>
                  <section data-background="img/maybragdon.lib.rochester.edu_islandora_object_maybragdon-524_mdpi_popup.png">
                    <!--<h3>https://maybragdon.lib.rochester.edu/</h3>-->
                  </section>

                  <section>
                    <h3>Interactive demo</h3>
                    <ul>
                      <li><a href="http://islandora.catalystdemo.net.nz/islandora/338/norman-hassell-memories-1914">Book</li>
                      <li><a href="http://islandora.catalystdemo.net.nz/islandora/object/islandora%3A350/manage/datastreams">Book page datastreams</a></li>
                      <li><a href="http://islandora.catalystdemo.net.nz/islandora/324/plan-borough-palmerston-north-district-wellington-new-zealand">Large image</a></li>
                    </ul>
                  </section>


                  <section>
                    <h3>How does it work?</h3>
                    <ul style="font-size:.8em">
                      <li><img class="img-right" src="img/DOexample.png" alt="Fedora datastreams"/>Datastreams: Binary + XML (e.g. RELS-EXT, MODS, RDF, DC, OBJ, TN)</li>
                      <li>Solution packs for PDF, Basic Image, Large Image, Video, Audio, Books, etc.</li>
                      <li>Viewers: Mozilla pdf.js, Internet Archive Book Viewer, video.js, OpenSeadragon etc.</li>
                    </ul>
                  </section>

                  <section>
                    <h3>System architecture</h3>
                    <ul>
                      <li>Drupal + Fedora + Solr</li>
                      <li>MySQL / Mulgara (some Blazegraph)</li>
                      <li>Gsearch</li>
                      <li>Drupal Filter</li>
                      <li>Tika, Tesseract OCR, LAME, ffmpeg, FITS, Djatoka et al</li>
                    </ul>
                  </section>
                <!--</section>-->

                <!--<section>-->
                  <!-- Slide with full background image -->
                  <!--<section data-background="img/kenton_chambers_feb_2011.jpg">
                      <h3 style="color: white">Migration</h3>
                  </section>-->
                  <!--<section>
                    <h3>Migration</h3>
                    <ul>
                      <li>Motivation for migration</li>
                      <li>Discovery</li>
                      <li>Migration</li>
                    </ul>
                  </section>-->
                  <section>
                    <h3>Motivation</h3>
                    <ul>
                      <li>One-off custom software base -> Community codebase</li>
                      <li>Niggling bugs & issues, esp. re security model</li>
                      <li>Improvements to search, maps, UI.</li>
                      <li>Responsive design</li>
                      <li>Revise & simplify ontology</li>
                    </ul>
                  </section>

                  <!-- Large image slide -->
                  <section class="image-slide">
                    <h3>QuakeStudies ontology</h3>
                    <a href="img/ceismic_jh.dot.gif"><img style="height:400px; width:800px" src="img/ceismic_jh.dot.gif" alt=""></a>
                  </section>
                <!--</section>-->

                <section>
                  <h3>Discovery</h3>
                  <ul>
                    <li>Drupal content types from legacy ontology (Collection, Object, Part etc.)</li>
                    <li>Drupal Migrate framework, pulling from Fedora API as XML</li>
                    <li>Views: table views, export as CSV</li>
                    <li>CSV -> OpenRefine, text facets, cleaning</li>
                    <li>Some custom SPARQL queries</li>
                  </ul>
                </section>

                <!-- Slide with code block -->
        				<section>
        					<h3>Migration: new ontology</h3>
                  <p>RDF: DC, DCTERMS, schema.org, DigitalNZ, QSR</p>

                  <pre><code style="font-size:.7em" data-trim contenteditable>
                    <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:schema="http://schema.org" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:qsr="http://quakestudies.canterbury.ac.nz" xmlns:dnz="http://digitalnz.org/dummy" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                      <dc:title>Crack&apos;d for Christchurch Photograph 117</dc:title>
                      <dc:identifier>qsr-object:283082</dc:identifier>
                      <dc:date>2014-02-01 11:11:11</dc:date>
                      <dc:description>&lt;p&gt;A photograph of Jenny Cooper taking a break in front of the Crack&apos;d for Christchurch armchair artwork. The Crack&apos;d for Christchurch team have been working on the artwork in a garage.&lt;/p&gt;&lt;p&gt;Crack&apos;d for Christchurch comments, &quot;February 2014. The work continues through the summer and into the winter.&quot;&lt;/p&gt;</dc:description>
                      <dc:subject>armchair</dc:subject>
                      <dc:subject>Arts, Culture and Society</dc:subject>
                      <dcterms:spatial>-43.6030,172.7224</dcterms:spatial>
                      <dc:publisher>Crack&apos;d for Christchurch [qsr-party:357]</dc:publisher>
                      <dc:type>Still Image</dc:type>
                      <dc:format>image/jpeg</dc:format>
                      <dc:rights>Creative Commons BY-NC-ND 3.0 NZ [qsr-licence:104]</dc:rights>
                      <qsr:creator_credit>foobar</qsr:creator_credit>
                      <dnz:landing_url>https://quakestudies2.canterbury.ac.nz/store/object/283082</dnz:landing_url>
                    </rdf:RDF></code></pre>
        				</section>

                <section>
                  <h3>Migration</h3>
                  <ul>
                    <li>New ontology: Objects -> Collection, Compound Object, skip</li>
                    <li>Migrate <em>through</em> Drupal to Fedora (via Tuque)</li>
                    <li>Migrate classes for Collection & Objects</li>
                    <li>Object splits to PDF CModel, Image CModel etc.</li>
                  </ul>
                </section>

                <!-- Large image slide -->
                <section class="image-slide">
                  <h3>MigrateDestinationFedoraObject</h3>
                  <a href="img/MigrateDestinationFedoraObject_class.png"><img src="img/MigrateDestinationFedoraObject_class.png" alt=""></a>
                </section>

                <!-- Large image slide -->
                <section class="image-slide">
                  <h3>drush ms</h3>
                  <a href="img/drush_ms_screenshot.png"><img src="img/drush_ms_screenshot.png" alt=""></a>
                </section>

                <section>
                  <h3>Order of migration</h3>
                  <ul style="font-size:.8em">
                    <li>1. Licence (these have no dependencies)</li>
                    <li>2. Place (based on Address and Position)</li>
                    <li>3. Event (based on Event and Datetime)</li>
                    <li>4. Party (including Content Partner), depends on Address.</li>
                    <li>5. Categories</li>
                    <li>6. Collection</li>
                    <li>7. Objects & Parts</li>
                  </ul>
                </section>

                <section data-background="img/collection_tree.png">
                  <!--<h3>QS home</h3>-->
                </section>

                <section>
                  <h3>Challenges/Tips</h3>
                  <ul>
                    <li>83MB XML</li>
                    <li>DNS timeouts?</li>
                    <li>>150,000 objects, 1.3TB, VPN, transcoding, etc.</li>
                    <li>order of migration</li>
                    <li>--idlist expansion</li>
                    <li>multiplexing migration</li>
                  </ul>
                </section>

                <section data-background="img/quakestudies_islandora_home.png">
                  <!--<h3>QS home</h3>-->
                </section>
              <!--</section>-->

              <!--<section>-->
                  <!-- Slide with full background image -->
                  <!--<section data-background="img/kenton_chambers_feb_2011.jpg">
                    <h3 style="color: white">Future</h3>
                  </section>-->
                  <section>
                    <h3>Future for QuakeStudies</h3>
                    <ul>
                      <li>Maps, spatial search</li>
                      <li>LINZ Street address lookup</li>
                      <li>Improved displays for content</li>
                      <li>Islandora 7.x-1.10 released last week</li>
                      <li>API use</li>
                    </ul>
                  </section>
                  <section>
                    <h3>Future for Islandora</h3>
                    <ul>
                      <li><img class="img-right" src="img/2dfb463a-1dec-11e6-9089-06df94ef3f37.png" alt="Fedora datastreams"/><a href="https://islandora.ca/CLAW">Islandora CLAW</a>: Drupal 8 & Fedora Commons 4</li>
                      <li>W3C <a href="https://islandora-claw.github.io/CLAW/user-documentation/intro-to-ld-for-claw/">Linked Data Platform</a> & RDF</li>
                      <li>Portland Common Data Model (<a href="http://pcdm.org/2016/04/18/models">PCDM</a>)</li>
                      <li><a href="https://islandora-claw.github.io/CLAW/crayfish/README/">microservices</a>, <a href="https://wiki.duraspace.org/display/FF/Design+-+API+Extension+Architecture">API-X</a></li>
                    </ul>
                  </section>
                <!--</section>-->

                <section>
                  <h3>Questions</h3>
                </section>

            </div>

            <div class="footer">
                <div class="scarf">
                    <div class="scarf-orange"></div>
                    <div class="scarf-yellow"></div>
                    <div class="scarf-blue"></div>
                    <div class="scarf-green"></div>
                </div>
                <div class="footer-inner">
                    <div class="catalyst-logo-footer">Catalyst</div>
                    <!-- NOTE: use only one of these. open-source-technologists is the standard -->
                    <div class="open-source-technologists">open source technologists</div>
                    <!-- <div class="freedom-to-innovate">freedom to innovate</div> -->
                </div>
            </div>
        </div>


        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'none', // default/cube/page/concave/zoom/linear/fade/none

                // Parallax scrolling
                // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
                // parallaxBackgroundSize: '2100px 900px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
